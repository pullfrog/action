# Ensure lockfile is up to date if package.json changed
if git diff --cached --name-only | grep -q "^package.json$"; then
    echo "ðŸ”’ Updating lockfile..."
    pnpm lock

    # Build the action before committing
    echo "ðŸ”¨ Building action..."
    pnpm build

    # Add the built files and lockfile to the commit
    git add entry mcp-server pnpm-lock.yaml
fi
